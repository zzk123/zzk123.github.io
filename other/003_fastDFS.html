<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>FastDFS相关 | Koala &#39;s blog</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="欢迎来到我的博客">
    <link rel="preload" href="/assets/css/0.styles.0dca6718.css" as="style"><link rel="preload" href="/assets/js/app.193c9b61.js" as="script"><link rel="preload" href="/assets/js/2.be286493.js" as="script"><link rel="preload" href="/assets/js/61.68ecf247.js" as="script"><link rel="prefetch" href="/assets/js/10.d195f939.js"><link rel="prefetch" href="/assets/js/11.dd42e2a6.js"><link rel="prefetch" href="/assets/js/12.ee2c872c.js"><link rel="prefetch" href="/assets/js/13.788181fe.js"><link rel="prefetch" href="/assets/js/14.923b40d7.js"><link rel="prefetch" href="/assets/js/15.be1e8f2a.js"><link rel="prefetch" href="/assets/js/16.a5861f2e.js"><link rel="prefetch" href="/assets/js/17.0ca1cca8.js"><link rel="prefetch" href="/assets/js/18.3552af88.js"><link rel="prefetch" href="/assets/js/19.d0b598dd.js"><link rel="prefetch" href="/assets/js/20.312fba46.js"><link rel="prefetch" href="/assets/js/21.de99e5de.js"><link rel="prefetch" href="/assets/js/22.4cb1ef09.js"><link rel="prefetch" href="/assets/js/23.2e9ea85a.js"><link rel="prefetch" href="/assets/js/24.1cd100b8.js"><link rel="prefetch" href="/assets/js/25.c17ed571.js"><link rel="prefetch" href="/assets/js/26.cee42a14.js"><link rel="prefetch" href="/assets/js/27.34b9e8bb.js"><link rel="prefetch" href="/assets/js/28.a0fd1666.js"><link rel="prefetch" href="/assets/js/29.cc16a8ba.js"><link rel="prefetch" href="/assets/js/3.e2b53d75.js"><link rel="prefetch" href="/assets/js/30.4b4a9808.js"><link rel="prefetch" href="/assets/js/31.55d17ac2.js"><link rel="prefetch" href="/assets/js/32.e6285297.js"><link rel="prefetch" href="/assets/js/33.2cf9fcd0.js"><link rel="prefetch" href="/assets/js/34.549b5096.js"><link rel="prefetch" href="/assets/js/35.fd8c8f14.js"><link rel="prefetch" href="/assets/js/36.db162c08.js"><link rel="prefetch" href="/assets/js/37.f105831d.js"><link rel="prefetch" href="/assets/js/38.d42b82e0.js"><link rel="prefetch" href="/assets/js/39.eb81783f.js"><link rel="prefetch" href="/assets/js/4.2837b6be.js"><link rel="prefetch" href="/assets/js/40.87c4c789.js"><link rel="prefetch" href="/assets/js/41.fc9b4279.js"><link rel="prefetch" href="/assets/js/42.c9148681.js"><link rel="prefetch" href="/assets/js/43.dbe26f4f.js"><link rel="prefetch" href="/assets/js/44.b1d85a5c.js"><link rel="prefetch" href="/assets/js/45.5a1e6a7a.js"><link rel="prefetch" href="/assets/js/46.bd963e4a.js"><link rel="prefetch" href="/assets/js/47.f6e86edc.js"><link rel="prefetch" href="/assets/js/48.bdbc5c65.js"><link rel="prefetch" href="/assets/js/49.65ae461d.js"><link rel="prefetch" href="/assets/js/5.3f71247d.js"><link rel="prefetch" href="/assets/js/50.66be60b2.js"><link rel="prefetch" href="/assets/js/51.42b1c641.js"><link rel="prefetch" href="/assets/js/52.bb9f5b94.js"><link rel="prefetch" href="/assets/js/53.3ed95f43.js"><link rel="prefetch" href="/assets/js/54.b989fa99.js"><link rel="prefetch" href="/assets/js/55.7799c2bd.js"><link rel="prefetch" href="/assets/js/56.95e3d2fa.js"><link rel="prefetch" href="/assets/js/57.47649eef.js"><link rel="prefetch" href="/assets/js/58.c3ce9734.js"><link rel="prefetch" href="/assets/js/59.1e092fb4.js"><link rel="prefetch" href="/assets/js/6.ba15ebf3.js"><link rel="prefetch" href="/assets/js/60.ae57b5f2.js"><link rel="prefetch" href="/assets/js/62.42a2fc04.js"><link rel="prefetch" href="/assets/js/63.819b8db9.js"><link rel="prefetch" href="/assets/js/64.8034f4d3.js"><link rel="prefetch" href="/assets/js/65.fa291912.js"><link rel="prefetch" href="/assets/js/66.3db4dcf7.js"><link rel="prefetch" href="/assets/js/67.a66d7e55.js"><link rel="prefetch" href="/assets/js/68.cbaf17d3.js"><link rel="prefetch" href="/assets/js/7.6f9d368d.js"><link rel="prefetch" href="/assets/js/8.516fa0e1.js"><link rel="prefetch" href="/assets/js/9.f1946ce5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0dca6718.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container custom-page-class"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">Koala 's blog</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/design/">
          设计模式
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/algorithm/">
          算法相关
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          java相关
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/other/" class="sidebar-link">介绍</a></li><li><a href="/other/001_DNSResolution.html" class="sidebar-link">DNS域名解析</a></li><li><a href="/other/002_extendsAndSuper.html" class="sidebar-link">泛型通配符extends与super的区别</a></li><li><a href="/other/003_fastDFS.html" class="active sidebar-link">FastDFS相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#什么是fastdfs" class="sidebar-link">什么是FastDFS</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#fastdfs特性" class="sidebar-link">FastDFS特性</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#fastdfs相关概念" class="sidebar-link">FastDFS相关概念</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#上传机制" class="sidebar-link">上传机制</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#内部机制如下：" class="sidebar-link">内部机制如下：</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#下载机制" class="sidebar-link">下载机制</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#同步时间管理" class="sidebar-link">同步时间管理</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#精巧的文件id-fid" class="sidebar-link">精巧的文件ID-FID</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#快速定位文件" class="sidebar-link">快速定位文件</a></li><li class="sidebar-sub-header"><a href="/other/003_fastDFS.html#部署fastdfs分布式文件系统" class="sidebar-link">部署FASTDFS分布式文件系统</a></li></ul></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="什么是fastdfs"><a href="#什么是fastdfs" aria-hidden="true" class="header-anchor">#</a> 什么是FastDFS</h2> <p>       FastDFS是一个开源的轻量级分布式文件系统，解决了大数据量存储和负载均衡等问题，特别适合以中小文件（建议范围：4KB&lt;file_size&lt;500MB ）为载体的在线服务，如相册网站，视频网站等等，在UC基于FastDFS开发向用户提供了：网盘，社区，广告和应用下载等业务的存储服务<br>
FastDFS是一款开源的轻量级分布式文件系统纯C实现，支持Liunx、FreeBSD等UNIX系统类goole FS，不是通用的文件系统，只能通过专有API访问，目前提供了C、java和php API为互联网应用量身定做，解决大容量文件存储问题，追求高性能和高扩展FastDFS可以看做基于文件的key value pair存储系统，称作分布式文件存储服务更为合适</p> <h2 id="fastdfs特性"><a href="#fastdfs特性" aria-hidden="true" class="header-anchor">#</a> FastDFS特性</h2> <div class="language- extra-class"><pre><code>○ 文件不分块存储，上传的文件和OS文件系统中的文件一一对应
○ 支持相同内容的文件只保存一份，节约磁盘空间
○ 下载文件支持HTTP协议，可以使用内置WebServer，也可以和其他Web Server配合使用
○ 支持在线扩容
○ 支持主从文件
○ 存储服务器上可以保存文件属性（meta-data）V2.0网络通信采用libevent，支持大并发访问，整体性能更好
</code></pre></div><h2 id="fastdfs相关概念"><a href="#fastdfs相关概念" aria-hidden="true" class="header-anchor">#</a> FastDFS相关概念</h2> <p>FastDFS服务端有三个角色：<em><strong>跟踪服务器（tracker  server）</strong></em> 、<em><strong>存储服务器（storage server）</strong></em> 和 <em><strong>客户端（client）</strong></em></p> <ul><li><p><em><strong>tracker server</strong></em>：跟踪服务器，主要做调用工作，起负载均衡的作用，在内存中记录集群中所有存储组和存储服务器的状态信息，是客户端和数据服务器交互的枢纽，相比GFS中master更为精简，不记录文件索引信息，占用的内存量很少.<br>
       Tracker是FastDFS的协调者，负责管理所有的storage server和group，每个storage在启动后会连接Tracker，告知自己所属的group等信息，并保持周期性的心跳，tracker根据storage的心跳信息，建立group=&gt;[storage server list]的映射表.<br>
       Tracker需要管理的元信息很少，会全部存储在内存中；另外tracker上的元信息都是由storage汇报的信息生成的，本身不需要持久化任何数据，这样使得tracker非常容易扩展，直接增加tracker机器即可扩展为tracker cluster来服务，cluster里每个tracker之间是完成对等的，所有的tracker都接收storage的心跳信息，生成元数据信息来提供读写服务.</p></li> <li><p><em><strong>storage server</strong></em>：存储服务器（又称为存储节点或数据服务器），文件和文件属性（meta data）都保存到存储服务器上，Storage server直接利用OS的文件系统调用管理文件.<br>
       Storage Server（简称storage）以组（卷，group或volume）为单位组织，一个group内包含多台storage机器，数据互为备份，存储空间以group内容量最小的storage为准，所以建议group内的多个storage尽量配置相同，以免造成存储空间的浪费.<br>
以group为单位组织存储能方便进行应用隔离、负载均衡、副本数定制（group内storage server数量即为该group的副本数），比如将不同应用数据存到不同的group就能隔离应用数据，同时还可根据应用的访问特性来将应用分配到不同的group来做负载均衡；缺点是group的容量受单机存储容量的限制，同时当group内有机器坏掉时，数据恢复只能依赖group内其他机器，使得恢复时间很长.<br>
       group内每个storage的存储依赖于本地文件系统，storage可配置多个数据存储目录，比如有10块磁盘，分别挂载在/data/disk1-/data/disk10，则可将这10个目录都配置为storage的数据存储目录.<br>
       storage接收到写文件请求时，会根据配置好的规则，选择其中一个存储目录来存储文件，为了避免单个目录下的文件数太多，在storage第一次启动时，会在每个数据存储目录里创建2级目录，每级256个，总共6553个文件，新写的文件会以hash的方式被路由到其中某个子目录下，然后将文件数据直接作一个本地文件存储到该目录下.</p></li> <li><p><em><strong>client</strong></em>：客户端，作为业务请求的发起方，通过专有接口，使用TCP/IP协议与跟踪服务器或存储节点进行数据交互，FastDFS向使用者提供基本文件访问接口，比如upload、download、append、delete等，以客户端库的方式提供给用户使用.</p></li> <li><p><em><strong>group</strong></em>：组，也可称为卷。同组内服务器上的文件是完全相同的，同一组内的storage server之间是对等的，文件上传，删除操作可以在任意一台storage server进行.</p></li> <li><p><em><strong>meta data</strong></em>：文件相关属性，键值对（Key Value Pair）方式，比如：width=1024，heigth=768.</p></li></ul> <p><a data-fancybox="" title="FastDFS服务端" href="/pic/aboutjava/fastdfs_001.jpg"><img src="/pic/aboutjava/fastdfs_001.jpg" alt="FastDFS服务端"></a></p> <blockquote><p>Tracker相当于FastDFS的大脑，不论是上传还是下载都是通过tracker来分配资源；客户端一般可以使用ngnix等静态服务器来调用或做一部分的缓存；存储服务器内部分为卷（或者叫做组），卷与卷之间是平行关系，可以根据资源的使用情况随时增加，卷内服务器文件相互同步备份，以达到容灾的目的</p></blockquote> <h2 id="上传机制"><a href="#上传机制" aria-hidden="true" class="header-anchor">#</a> 上传机制</h2> <p>首先客户端请求tracker服务获取到存储服务器的ip地址和端口，然后客户端根据返回的ip地址和端口号请求上传文件，存储服务器接收到请求后生产文件，并且将文件内容写入磁盘并返回给客户端file_id、路径信息、文件名等信息，客户端保存相关信息上传完毕</p> <p><a data-fancybox="" title="上传机制" href="/pic/aboutjava/fastdfs_002.jpg"><img src="/pic/aboutjava/fastdfs_002.jpg" alt="上传机制"></a></p> <h2 id="内部机制如下："><a href="#内部机制如下：" aria-hidden="true" class="header-anchor">#</a> 内部机制如下：</h2> <ul><li><ol><li><em><strong>选择tracker server</strong></em></li></ol> <p>当集群中不止一个tracker server时，由于tracker之间是完全对等的关系，客户端在upload文件时可以任意选择一个tracker。选择存储的group，当tracker接收到upload file的请求时，会为该文件分配一个可以存储该文件的group，支持如下选择group的规则：
a. Round robin：所有的group间轮询
b. Specified group：指定某一个确定的group
c. Load balance：剩余存储空间多，多的group优先</p></li> <li><ol start="2"><li><em><strong>选择storage server</strong></em></li></ol> <p>当选定group之后，tracker会在group内选择一个storage server给客户端，支持如下选择storage的规则：</p> <div class="language- extra-class"><pre><code>a. Round robin：在group内的所有storage间轮询
b. First server ordered by ip：按ip排序
c. First server ordered by priority：按优先级排序（优先级在storage上配置）
</code></pre></div></li> <li><ol start="3"><li><em><strong>选择storage path</strong></em></li></ol> <p>当分配好storage server后，客户端将向storage发送写文件的请求，storage将会为文件分配一个数据存储目录，支持规则如下：</p> <div class="language- extra-class"><pre><code> a. Round robin：多个存储目录间轮询
 b. 剩余存储空间最多的优先
</code></pre></div></li> <li><ol start="4"><li><em><strong>生产file id</strong></em></li></ol> <p>选定存储目录之后，storage会为文件生成一个fileid，由storage server ip、文件创建时间、文件大小、文件crc32和一个随机数拼接而成，然后将这个二进制串践行base64编码，转换成可打印的字符串，选择两级目录当选定存储目录之后，storage会为文件分配一个fileid，每个存储目录下有两级256*256的子目录，storage会按文件fileid进行两次hash(猜测)，路由到其中一个子目录，然后将文件一个fileId为文件名存储到该子目录下</p></li> <li><ol start="5"><li><em><strong>生成文件名</strong></em></li></ol> <p>当文件存储到某个子目录后，即认为该文件存储成功，接下来会为该文件生成一个文件名，文件名由group、存储目录、两级子目录、filedId、文件后缀名（由客户端指定，主要用于区分文件类型）拼接而成</p></li></ul> <h2 id="下载机制"><a href="#下载机制" aria-hidden="true" class="header-anchor">#</a> 下载机制</h2> <p>客户端带上文件名信息请求Tracker服务获取到存储服务器的ip地址和端口，然后客户端根据返回的IP地址和端口请求下载文件，存储服务器接收到请求后返回文件给客户端</p> <p><a data-fancybox="" title="下载机制" href="/pic/aboutjava/fastdfs_003.jpg"><img src="/pic/aboutjava/fastdfs_003.jpg" alt="下载机制"></a></p> <p>       跟upload file一样，在download file时客户端可以选择任意tracker server。tracker发送download请求给某个tracker，必须带上文件名信息，tracke从文件名中解析出文件的group、大小、创建时间等信息，然后为该请求选择一个storage用来服务读请求，由于group内的文件同步是在后台异步进行的，所以有可能出现在读到时候，文件还没有同步到某些storage server上，为了尽量避免访问到这样的storage，tracker按照如下规则选择group内可读的storage</p> <div class="language- extra-class"><pre><code>1. 该文件上传到的源头storage-源头storage只要存活着，肯定包含这个文件，源头的地址被编码在文件名中
2. 文件创建时间戳 == storage被同步到的时间戳 且（当前时间-文件创建时间戳）&gt; 文件同步最大时间（如5分钟） - 文件创建后，认为经过最大同步时间后，肯定已经同步到其他storage了。
3. 文件创建时间戳 &lt; storage被同步到的时间戳。 - 同步时间戳之前的文件确定已经同步
4. （当前时间-文件创建时间戳）&gt; 同步延迟阈值（如一天）。经过同步延迟阈值时间，认为文件肯定已经同步
</code></pre></div><h2 id="同步时间管理"><a href="#同步时间管理" aria-hidden="true" class="header-anchor">#</a> 同步时间管理</h2> <p>当一个文件上传成功后，客户端马上发起对该文件下载请求（或删除请求）时，tracker是如何选定一个适合的存储服务器呢？其实每个存储服务器都需要定时将自身的信息上报给tracker，这些信息就包括了本地同步时间（即同步到的最新文件时间戳）。而tracker根据各个存储服务器的上报情况，就能知道刚刚上传的文件，在该存储组中是否已完成同步，同步信息上报如下：</p> <p><a data-fancybox="" title="同步时间管理" href="/pic/aboutjava/fastdfs_004.jpg"><img src="/pic/aboutjava/fastdfs_004.jpg" alt="同步时间管理"></a></p> <p>       写文件时，客户端将文件写至group内一个storage sever即认为写文件成功，storage server写完文件后，会由后台线程将文件同步到同group内其他的storage server<br>
       每个storage写文件，同时会写一份binlog，binlog里不包含文件数据，只包含文件等元信息，这份binlog用于后台同步，storage会记录向group内其他storage同步的进度，以便重启后能接上上次的进度继续同步；进度以时间戳的方式进行记录，所以最好能保证集群内所有的server的时间保持同步<br>
       storage的同步进度会作为元数据的一部分汇报到tracker上，tracker在选择读storage的时候会以同步进度作为参考。比如一个group内A、B、C三个storage server，A向C同步到进度为T1（T1以前写的文件都已经同步到B上了），B向C同步到时间戳为T2（T2&gt;T1），tracker接收到这些同步进度信息时，就会进行整理，将最小的那个作为C的同步时间戳，本例中T1即为C的同步时间戳为T1(所有T1以前写的数据都已经同步到C上了)；同理，根据以上规则，tracker会为A，B生成一个同步时间戳</p> <h2 id="精巧的文件id-fid"><a href="#精巧的文件id-fid" aria-hidden="true" class="header-anchor">#</a> 精巧的文件ID-FID</h2> <p>说到下载就不得不提文件索引（又称为：FID）的精巧设计了，文件索引结构如下图，是客户端上传文件后存储服务器返回给客户端，用于以后访问该文件的索引信息，文件索引信息包括：组名，虚拟磁盘路径，数据两级目录，文件名</p> <p><a data-fancybox="" title="FID" href="/pic/aboutjava/fastdfs_005.jpg"><img src="/pic/aboutjava/fastdfs_005.jpg" alt="FID"></a></p> <div class="language- extra-class"><pre><code>• 组名：文件上传后所在的存储组名称，在文件上传成功后有存储服务器返回，需要客户端自行保存
• 虚拟磁盘路径：存储服务器配置的虚拟路径，与磁盘选项store_path*对应
• 数据两级目录：存储服务器在每个虚拟磁盘路径下创建的两级目录，用于存储数据文件
• 文件名：与文件上传时不同，是由存储服务器根据特定信息生成的，文件名包含：源存储服务器IP地址，文件创建时间戳，文件大小，随机数和文件扩展名等信息
</code></pre></div><h2 id="快速定位文件"><a href="#快速定位文件" aria-hidden="true" class="header-anchor">#</a> 快速定位文件</h2> <p>知道FastDFS FID的组成后，是如何定位到需要访问的文件？</p> <div class="language- extra-class"><pre><code>1. 通过组名tracker能够很快的定位到客户端需要访问的存储服务器组，并将选择合适的存储服务器提供客户端访问
2. 存储服务器根据“文件存储虚拟磁盘路径”和“数据文件两级目录”可以很快定位到文件所在目录，并根据文件名找到客户端需要访问的文件
</code></pre></div><p><a data-fancybox="" title="快速定位文件" href="/pic/aboutjava/fastdfs_006.jpg"><img src="/pic/aboutjava/fastdfs_006.jpg" alt="快速定位文件"></a></p> <h2 id="部署fastdfs分布式文件系统"><a href="#部署fastdfs分布式文件系统" aria-hidden="true" class="header-anchor">#</a> 部署FASTDFS分布式文件系统</h2> <p><a data-fancybox="" title="部署FASTDFS分布式文件系统" href="/pic/aboutjava/fastdfs_007.jpg"><img src="/pic/aboutjava/fastdfs_007.jpg" alt="部署FASTDFS分布式文件系统"></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/other/002_extendsAndSuper.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        泛型通配符extends与super的区别
      </a></span> <!----></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.193c9b61.js" defer></script><script src="/assets/js/2.be286493.js" defer></script><script src="/assets/js/61.68ecf247.js" defer></script>
  </body>
</html>