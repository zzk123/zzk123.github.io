<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>外观模式 | Koala &#39;s blog</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="欢迎来到我的博客">
    <link rel="preload" href="/assets/css/0.styles.0dca6718.css" as="style"><link rel="preload" href="/assets/js/app.193c9b61.js" as="script"><link rel="preload" href="/assets/js/2.be286493.js" as="script"><link rel="preload" href="/assets/js/30.4b4a9808.js" as="script"><link rel="prefetch" href="/assets/js/10.d195f939.js"><link rel="prefetch" href="/assets/js/11.dd42e2a6.js"><link rel="prefetch" href="/assets/js/12.ee2c872c.js"><link rel="prefetch" href="/assets/js/13.788181fe.js"><link rel="prefetch" href="/assets/js/14.923b40d7.js"><link rel="prefetch" href="/assets/js/15.be1e8f2a.js"><link rel="prefetch" href="/assets/js/16.a5861f2e.js"><link rel="prefetch" href="/assets/js/17.0ca1cca8.js"><link rel="prefetch" href="/assets/js/18.3552af88.js"><link rel="prefetch" href="/assets/js/19.d0b598dd.js"><link rel="prefetch" href="/assets/js/20.312fba46.js"><link rel="prefetch" href="/assets/js/21.de99e5de.js"><link rel="prefetch" href="/assets/js/22.4cb1ef09.js"><link rel="prefetch" href="/assets/js/23.2e9ea85a.js"><link rel="prefetch" href="/assets/js/24.1cd100b8.js"><link rel="prefetch" href="/assets/js/25.c17ed571.js"><link rel="prefetch" href="/assets/js/26.cee42a14.js"><link rel="prefetch" href="/assets/js/27.34b9e8bb.js"><link rel="prefetch" href="/assets/js/28.a0fd1666.js"><link rel="prefetch" href="/assets/js/29.cc16a8ba.js"><link rel="prefetch" href="/assets/js/3.e2b53d75.js"><link rel="prefetch" href="/assets/js/31.55d17ac2.js"><link rel="prefetch" href="/assets/js/32.e6285297.js"><link rel="prefetch" href="/assets/js/33.2cf9fcd0.js"><link rel="prefetch" href="/assets/js/34.549b5096.js"><link rel="prefetch" href="/assets/js/35.fd8c8f14.js"><link rel="prefetch" href="/assets/js/36.db162c08.js"><link rel="prefetch" href="/assets/js/37.f105831d.js"><link rel="prefetch" href="/assets/js/38.d42b82e0.js"><link rel="prefetch" href="/assets/js/39.eb81783f.js"><link rel="prefetch" href="/assets/js/4.2837b6be.js"><link rel="prefetch" href="/assets/js/40.87c4c789.js"><link rel="prefetch" href="/assets/js/41.fc9b4279.js"><link rel="prefetch" href="/assets/js/42.c9148681.js"><link rel="prefetch" href="/assets/js/43.dbe26f4f.js"><link rel="prefetch" href="/assets/js/44.b1d85a5c.js"><link rel="prefetch" href="/assets/js/45.5a1e6a7a.js"><link rel="prefetch" href="/assets/js/46.bd963e4a.js"><link rel="prefetch" href="/assets/js/47.f6e86edc.js"><link rel="prefetch" href="/assets/js/48.bdbc5c65.js"><link rel="prefetch" href="/assets/js/49.65ae461d.js"><link rel="prefetch" href="/assets/js/5.3f71247d.js"><link rel="prefetch" href="/assets/js/50.66be60b2.js"><link rel="prefetch" href="/assets/js/51.42b1c641.js"><link rel="prefetch" href="/assets/js/52.bb9f5b94.js"><link rel="prefetch" href="/assets/js/53.3ed95f43.js"><link rel="prefetch" href="/assets/js/54.b989fa99.js"><link rel="prefetch" href="/assets/js/55.7799c2bd.js"><link rel="prefetch" href="/assets/js/56.95e3d2fa.js"><link rel="prefetch" href="/assets/js/57.47649eef.js"><link rel="prefetch" href="/assets/js/58.c3ce9734.js"><link rel="prefetch" href="/assets/js/59.1e092fb4.js"><link rel="prefetch" href="/assets/js/6.ba15ebf3.js"><link rel="prefetch" href="/assets/js/60.ae57b5f2.js"><link rel="prefetch" href="/assets/js/61.68ecf247.js"><link rel="prefetch" href="/assets/js/62.42a2fc04.js"><link rel="prefetch" href="/assets/js/63.819b8db9.js"><link rel="prefetch" href="/assets/js/64.8034f4d3.js"><link rel="prefetch" href="/assets/js/65.fa291912.js"><link rel="prefetch" href="/assets/js/66.3db4dcf7.js"><link rel="prefetch" href="/assets/js/67.a66d7e55.js"><link rel="prefetch" href="/assets/js/68.cbaf17d3.js"><link rel="prefetch" href="/assets/js/7.6f9d368d.js"><link rel="prefetch" href="/assets/js/8.516fa0e1.js"><link rel="prefetch" href="/assets/js/9.f1946ce5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0dca6718.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container custom-page-class"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">Koala 's blog</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="/design/" class="router-link-active">
          设计模式
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/algorithm/">
          算法相关
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          java相关
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/design/001_Preface.html" class="sidebar-link">前言</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>创建者模式</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>结构性模式</span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/009_StructuralPattern.html" class="sidebar-link">介绍</a></li><li><a href="/design/010_AdapterPattern.html" class="sidebar-link">适配器模式</a></li><li><a href="/design/011_BridgePattern.html" class="sidebar-link">桥接模式</a></li><li><a href="/design/012_CompositePattern.html" class="sidebar-link">组合模式</a></li><li><a href="/design/013_DecoratorPattern.html" class="sidebar-link">装饰模式</a></li><li><a href="/design/014_FacadePattern.html" class="active sidebar-link">外观模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#结构图" class="sidebar-link">结构图</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#代码实现-2" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#外观角色设计补充说明：" class="sidebar-link">外观角色设计补充说明：</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#主要优点" class="sidebar-link">主要优点</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#主要缺点" class="sidebar-link">主要缺点</a></li><li class="sidebar-sub-header"><a href="/design/014_FacadePattern.html#适用场合" class="sidebar-link">适用场合</a></li></ul></li><li><a href="/design/015_FlyweightPattern.html" class="sidebar-link">享元模式</a></li><li><a href="/design/016_ProxyPattern.html" class="sidebar-link">代理模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>行为性模式</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="概述"><a href="#概述" aria-hidden="true" class="header-anchor">#</a> 概述</h2> <p>根据单一职责原则，在软件中将一个系统划分为若干个子系统(Subsystem)有利于降低整个系统的复杂性，一个常见的设计目标是使客户类与子系统之间的通信和相互依赖关系达到最小，而达到该目标的途径之一就是引入一个外观(Facade)角色，它为子系统的访问提供了一个简单而单一的入口。外观模式也就是迪米特法则的体现，通过引入一个新的外观角色可以降低原有系统的复杂度，同时降低客户类与子类的耦合度</p> <p>如果没有外观角色，每个客户端可能需要和多个子系统之间进行复杂的交互，系统的耦合度将很大，而增加一个外观角色之后，客户端只需要直接与外观角色交互，客户端与子系统之间原有的复杂关系由外观角色来实现，从而降低了系统的耦合度。</p> <blockquote><p>注：在外观模式中所指的子系统是一个广义的概念，它可以是一个类，一个功能模块，系统的一个组成部分或者一个完整的系统</p></blockquote> <h2 id="定义"><a href="#定义" aria-hidden="true" class="header-anchor">#</a> 定义</h2> <blockquote><p>外观模式(Facade Pattern):外部与一个子系统的通信通过一个统一的外观角色进行，为子系统中的一组接口提供一个一致的入口，外观模式定义了一个高度接口，这个接口使得这一子系统更加容易使用。外观模式又称为门面模式，它是一种对象结构型模式</p></blockquote> <h2 id="结构图"><a href="#结构图" aria-hidden="true" class="header-anchor">#</a> 结构图</h2> <p><a data-fancybox="" title="结构图" href="/pic/design/zojSXDR.png"><img src="/pic/design/zojSXDR.png" alt="结构图"></a></p> <ol><li><p><strong>Facade（外观角色）</strong>：在客户端可以调用这个角色的方法，在外观角色中可以知道相关的（一个或者多个）子系统的功能和责任；在正常情况下，它将所有从客户端发来的请求委托到相应的子系统中，传递给相应的子系统对象处理</p></li> <li><p><strong>SubSytem（子系统角色）</strong>：在软件系统中可以有一个或者多个子系统角色，每一个子系统可以不是一个单独的类，而是一个类的集合，它实现子系统的功能，每一个子系统都可以被客户端直接调用，或者被外观角色调用，它处理由外观类传过来的请求；子系统并不知道外观的存在，对于子系统而言，外观角色仅仅是另外一个客户端而已</p></li></ol> <p><strong>    外观模式的主要目的在于降低系统的复杂程度</strong>，在面向对象软件系统中，类与类之间的关系越多，并不能表示系统设计得越好，反而表示系统中类之间的耦合度太大，这样的系统在维护修改时都缺乏灵活性，因为一个类的改动会导致多个类会发生变化。而外观模式的引入很大程度上降低了类之间的通信和关系。引入外观模式之后，增加新的子系统或者移除子系统都非常方便，客户端类无须进行修改（或者极少的修改），只需要在外观类中增加或移除对子系统的引用即可<br>
    从这一点来说，外观模式在一定程度上并不符合开闭原则，增加新的子系统需要对原有系统进行一定的修改，虽然这个修改工作量不大.</p> <h3 id="经典代码"><a href="#经典代码" aria-hidden="true" class="header-anchor">#</a> 经典代码</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>    class Facade<span class="token punctuation">{</span>
		
		private SubSystemA obj1 <span class="token operator">=</span> new SubSystemA<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		private SubSystemB obj2 <span class="token operator">=</span> new SubSystemB<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		private SubSystemC obj3 <span class="token operator">=</span> new SubSystemC<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		public void method<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			obj1.method<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			obj2.method<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			obj3.method<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h3 id="例子：文件加密模块的设计"><a href="#例子：文件加密模块的设计" aria-hidden="true" class="header-anchor">#</a> 例子：文件加密模块的设计</h3> <p><a data-fancybox="" title="结构图" href="/pic/design/VQoyPwR.png"><img src="/pic/design/VQoyPwR.png" alt="结构图"></a></p> <h3 id="代码实现"><a href="#代码实现" aria-hidden="true" class="header-anchor">#</a> 代码实现</h3> <p><strong>文件读取类：子系统类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class FileReader <span class="token punctuation">{</span>
		public String read<span class="token punctuation">(</span>String fileNameSrc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;读取文件，获取明文：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			StringBuffer sb <span class="token operator">=</span> new StringBuffer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			try <span class="token punctuation">{</span>
				FileInputStream inFS <span class="token operator">=</span> new FileInputStream<span class="token punctuation">(</span>fileNameSrc<span class="token punctuation">)</span><span class="token punctuation">;</span>
				int data<span class="token punctuation">;</span>
				<span class="token keyword">while</span><span class="token variable"><span class="token punctuation">((</span>data <span class="token operator">=</span> inFS.read<span class="token punctuation">(</span><span class="token punctuation">))</span></span><span class="token operator">!=</span> -1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					sb <span class="token operator">=</span> sb.append<span class="token variable"><span class="token punctuation">((</span>char<span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				}
				inFS.close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				System.out.println<span class="token punctuation">(</span>sb.toString<span class="token punctuation">(</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>catch <span class="token punctuation">(</span>FileNotFoundException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				System.out.println<span class="token punctuation">(</span><span class="token string">&quot;文件不存在！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>catch<span class="token punctuation">(</span>IOException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				System.out.println<span class="token punctuation">(</span><span class="token string">&quot;文件操作错误!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> sb.toString<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>数据加密类：子系统类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class CipherMachine <span class="token punctuation">{</span>
		public String encrypt<span class="token punctuation">(</span>String plainText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;数据加密，将明文转换为密文&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			String es <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
			for<span class="token punctuation">(</span>int i <span class="token operator">=</span> 0<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plainText.length<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				String c <span class="token operator">=</span> String.valueOf<span class="token punctuation">(</span>plainText.charAt<span class="token punctuation">(</span>i<span class="token punctuation">)</span> % 7<span class="token punctuation">)</span><span class="token punctuation">;</span>
				es +<span class="token operator">=</span> c<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			System.out.println<span class="token punctuation">(</span>es<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> es<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>文件保存类：子系统类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class FileWriter <span class="token punctuation">{</span>
		public void write<span class="token punctuation">(</span>String encryptStr, String fileNameDes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;保存密文，写入文件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			try <span class="token punctuation">{</span>
				FileOutputStream outFS <span class="token operator">=</span> new FileOutputStream<span class="token punctuation">(</span>fileNameDes<span class="token punctuation">)</span><span class="token punctuation">;</span>
				outFS.write<span class="token punctuation">(</span>encryptStr.getBytes<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
				outFS.close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>catch <span class="token punctuation">(</span>FileNotFoundException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				System.out.println<span class="token punctuation">(</span><span class="token string">&quot;文件不存在!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>catch <span class="token punctuation">(</span>IOException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				System.out.println<span class="token punctuation">(</span><span class="token string">&quot;文件操作错误!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>加密外观类：外观类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class EncryptFacade <span class="token punctuation">{</span>
		private FileReader reader<span class="token punctuation">;</span>
		private CipherMachine cipher<span class="token punctuation">;</span>
		private FileWriter writer<span class="token punctuation">;</span>
		
		public EncryptFacade<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			reader <span class="token operator">=</span> new FileReader<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cipher <span class="token operator">=</span> new CipherMachine<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			writer <span class="token operator">=</span> new FileWriter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		//调用其他对象的业务方法
		public void fileEncrypt<span class="token punctuation">(</span>String fileNameSrc, String fileNameDes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			String plainStr <span class="token operator">=</span> reader.read<span class="token punctuation">(</span>fileNameSrc<span class="token punctuation">)</span><span class="token punctuation">;</span>
			String encryptStr <span class="token operator">=</span> cipher.encrypt<span class="token punctuation">(</span>plainStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
			writer.write<span class="token punctuation">(</span>encryptStr, fileNameDes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>客户端：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class Client <span class="token punctuation">{</span>
		public static void main<span class="token punctuation">(</span>String args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			EncryptFacade ef <span class="token operator">=</span> new EncryptFacade<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ef.fileEncrypt<span class="token punctuation">(</span><span class="token string">&quot;源文件路径&quot;</span>, <span class="token string">&quot;目标文件路径&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h3 id="抽象外观类的引入"><a href="#抽象外观类的引入" aria-hidden="true" class="header-anchor">#</a> 抽象外观类的引入</h3> <p>在标准的外观模式结构图中，如果需要增加，删除或者更换与外观类交互的子系统类，必须修改外观类或客户端的源代码，这将违背开闭原则，因此可以通过引入抽象外观类来对系统进行改进，在一定程度上解决该问题。在引入抽象外观类之后，客户端可以针对抽象外观类进行编程，对于新的业务需求，不需要修改原有外观类，而对应增加一个新的具体外观类，由新的具体外观类来关联新的子系统对象，同时通过修改配置文件来达到不修改任何源代码并更换外观类的目的</p> <h3 id="例子（修改）"><a href="#例子（修改）" aria-hidden="true" class="header-anchor">#</a> 例子（修改）</h3> <p>以上例子的加密模块中需要更换一个加密类，不再使用原有的基于求模运算的加密类CipherMachine，而改为基于移位运算的新加密类NewCipherMachine，其中NewCipherMachine类代码如下：</p> <p><strong>基于移位运算的数据加密类：子系统类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class NewCipherMachine <span class="token punctuation">{</span>
		public String encrypt<span class="token punctuation">(</span>String plainText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;数据加密，将明文转换为密文：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			String es <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
			int key <span class="token operator">=</span> 10<span class="token punctuation">;</span> //设置秘钥，位移数为10
			for<span class="token punctuation">(</span>int i <span class="token operator">=</span> 0<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plainText.length<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				char c <span class="token operator">=</span> plainText.charAt<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				//小写字母移位
				if<span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token string">'a'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token string">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					c +<span class="token operator">=</span> key % 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&gt;</span> <span class="token string">'z'</span><span class="token punctuation">)</span>
						c -<span class="token operator">=</span> 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
						c +<span class="token operator">=</span> 26<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				//大写字母移位
				if<span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					c +<span class="token operator">=</span> key % 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&gt;</span> <span class="token string">'Z'</span><span class="token punctuation">)</span> 
						c -<span class="token operator">=</span> 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token string">'A'</span><span class="token punctuation">)</span>
						c +<span class="token operator">=</span> 26<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				es +<span class="token operator">=</span> c<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			System.out.println<span class="token punctuation">(</span>es<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> es<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>如果不增加新的外观类，只能通过修改原有外观类EncryptFacade的源代码来实现加密类的更换</strong>，将原有的对CipherMachine类型对象的引用改为对NewCipherMachine类型对象的引用，这违背了开闭原则，因此需要通过新的外观类来实现对子系统对象引用的改变</p> <p><strong>如果增加一个新的外观类NewEncryptFacade来与FileReader类，FileWriter类以及新增加的NewCipherMachine类进行交互</strong>，虽然原有系统类库无须做任何修改，但是因为客户端代码中原来针对EncryptFacade类进行的编程，现在需要改为NewEncryptFacade类，因此需要修改客户端源代码</p> <p><strong>如何在不修改客户端代码的前提下使用新的外观类呢？</strong> 解决方法是：引入一个抽象外观类，客户端针对抽象外观类编程，而在运行时确定具体外观类之后的文件加密模块结构图如下:</p> <p><a data-fancybox="" title="结构图" href="/pic/design/BSB93uI.png"><img src="/pic/design/BSB93uI.png" alt="结构图"></a></p> <h2 id="代码实现-2"><a href="#代码实现-2" aria-hidden="true" class="header-anchor">#</a> 代码实现</h2> <p><strong>抽象外观类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	abstract class AbstractEncryptFacade <span class="token punctuation">{</span>
		public abstract void fileEncrypt<span class="token punctuation">(</span>String fileNameSrc, String fileNameDes<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>新加密外观类：具体外观类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class NewEncryptFacade extends AbstractEncryptFacade <span class="token punctuation">{</span>
	
		private FileReader reader<span class="token punctuation">;</span>
		private NewCipherMachine cipher<span class="token punctuation">;</span>
		private FileWriter writer<span class="token punctuation">;</span>
		
		public NewEncryptFacade<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			reader <span class="token operator">=</span> new FileReader<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cipher <span class="token operator">=</span> new NewCipherMachine<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			writer <span class="token operator">=</span> new FileWriter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		public void fileEncrypt<span class="token punctuation">(</span>String fileNameSrc, String fileNameDes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			String plainStr <span class="token operator">=</span> reader.read<span class="token punctuation">(</span>fileNameSrc<span class="token punctuation">)</span><span class="token punctuation">;</span>
			String encryptStr <span class="token operator">=</span> cipher.encrypt<span class="token punctuation">(</span>plainStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
			writer.write<span class="token punctuation">(</span>encryptStr, fileNameDes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>基于移位运算的数据加密类：子系统类</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class NewCipherMachine <span class="token punctuation">{</span>
		public String encrypt<span class="token punctuation">(</span>String plainText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;数据加密，将明文转换为密文：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			String es <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
			int key <span class="token operator">=</span> 10<span class="token punctuation">;</span> //设置秘钥，位移数为10
			for<span class="token punctuation">(</span>int i <span class="token operator">=</span> 0<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plainText.length<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				char c <span class="token operator">=</span> plainText.charAt<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				//小写字母移位
				if<span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token string">'a'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token string">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					c +<span class="token operator">=</span> key % 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&gt;</span> <span class="token string">'z'</span><span class="token punctuation">)</span>
						c -<span class="token operator">=</span> 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
						c +<span class="token operator">=</span> 26<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				//大写字母移位
				if<span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					c +<span class="token operator">=</span> key % 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&gt;</span> <span class="token string">'Z'</span><span class="token punctuation">)</span> 
						c -<span class="token operator">=</span> 26<span class="token punctuation">;</span>
					if<span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token string">'A'</span><span class="token punctuation">)</span>
						c +<span class="token operator">=</span> 26<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				es +<span class="token operator">=</span> c<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			System.out.println<span class="token punctuation">(</span>es<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> es<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>该方法用于从XML配置文件中提取具体类名，并返回一个实例对象</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class XMLUtil <span class="token punctuation">{</span>
		
		public static Object getBean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			try <span class="token punctuation">{</span>
				//创建文档对象
				DocumentBuilderFactory dFactory <span class="token operator">=</span> DocumentBuilderFactory.newInstance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				DocumentBuilder builder <span class="token operator">=</span> dFactory.newDocumentBuilder<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				Document doc<span class="token punctuation">;</span>
				doc <span class="token operator">=</span> builder.parse<span class="token punctuation">(</span>new File<span class="token punctuation">(</span><span class="token string">&quot;config.xml&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
				
				//获取包含类名的文本节点
				NodeList <span class="token function">nl</span> <span class="token operator">=</span> doc.getElementsByTagName<span class="token punctuation">(</span><span class="token string">&quot;className&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				Node classNode <span class="token operator">=</span> nl.item<span class="token punctuation">(</span>0<span class="token punctuation">)</span>.getFirstChild<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				String cName <span class="token operator">=</span> classNode.getNodeValue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				//通过类名生成实例对象并将其返回
				Class c <span class="token operator">=</span> Class.forName<span class="token punctuation">(</span>cName<span class="token punctuation">)</span><span class="token punctuation">;</span>
				Object obj <span class="token operator">=</span> c.newInstance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> null<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>config.xml配置文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	<span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span>?<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>config<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>className<span class="token operator">&gt;</span>NewEncryptFacade<span class="token operator">&lt;</span>/className<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>/config<span class="token operator">&gt;</span>
</code></pre></div><p>客户端测试</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class Client <span class="token punctuation">{</span>
		public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			AbstractEncryptFacade ef<span class="token punctuation">;</span>
			ef <span class="token operator">=</span> <span class="token punctuation">(</span>AbstractEncryptFacade<span class="token punctuation">)</span> XMLUtil.getBean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ef.fileEncrypt<span class="token punctuation">(</span><span class="token string">&quot;源文件路径&quot;</span>, <span class="token string">&quot;目标文件路径&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>原有外观类EncryptFacade也需作为抽象外观类AbstractEncryptFacade类的子类，更换具体外观类时只需修改配置文件，无须修改源代码，符合开闭原则。</p> <h2 id="外观角色设计补充说明："><a href="#外观角色设计补充说明：" aria-hidden="true" class="header-anchor">#</a> 外观角色设计补充说明：</h2> <ol><li><p>在很多情况下为了节约系统资源，系统中中需要一个外观类的实例，换言之，外观类可以是一个单例类。因此可以通过单例模式来设计外观类，从而确保系统中只有唯一一个访问子系统的入口，并降低对系统资源的消耗。</p></li> <li><p>在一个系统中可以设计多个外观类，每个外观类都负责和一些特定的子系统交互，向客户端提供相应的业务功能</p></li> <li><p>试图通过外观类为子系统增加新行为的做法是错误的，外观模式的用意是为子系统提供一个集中化和简化的沟通渠道，而不是向子系统加入新行为。新行为的增加应该通过修改原有子系统类或增加新的子系统类来实现，不能通过外观类来实现。</p></li></ol> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>外观模式是一种使用频率非常高的设计模式，它通过引入一个外观角色来简化客户端与子系统之间的交互，为复杂的子系统调用提供一个统一的入口，使得子系统与客户端的耦合度降低，且客户端调用非常方便。外挂模式并不给系统增加任何新功能，它仅仅是简化调用接口。在几乎所有的软件中都能找到外观模式的应用，例如，绝大多数B/S系统都有一个首页或者导航页面，大部分C/S系统都提供了菜单或者工具栏，而菜单和工具栏就是C/S系统的外观角色，通过它们，用户可以快速访问子系统，降低系统的复杂程度。此外，所有涉及与多个业务对象交互的场景都可以考虑使用外观模式来进行重构，例如JavaEE中的Session外观模式</p> <h2 id="主要优点"><a href="#主要优点" aria-hidden="true" class="header-anchor">#</a> 主要优点</h2> <ol><li><p>对客户端屏蔽了子系统组件，减少了客户端所需处理的对象数目并使得子系统使用起来更加容易。通过引入外观模式，客户端代码将变得很简单，与之关联的对象也很少</p></li> <li><p>实现了子系统与客户端之间的松耦关系，这使得子系统的变化不会影响到调用它的客户端，只需调整外观类即可</p></li> <li><p>一个子系统的修改对其他子系统没有任何影响，而且子系统内部变化也不会影响到外观对象</p></li> <li><p>只是提供了一个访问子系统的统一入口，并不影响客户端直接使用子系统类</p></li></ol> <h2 id="主要缺点"><a href="#主要缺点" aria-hidden="true" class="header-anchor">#</a> 主要缺点</h2> <ol><li><p>不能很好的限制客户端之间使用子系统类，如果对客户端访问子系统类做太多的限制则减少了可变性和灵活性</p></li> <li><p>如设计不当，增加新的子系统可能需要修改外观类的源代码，这违背了开闭原则</p></li></ol> <h2 id="适用场合"><a href="#适用场合" aria-hidden="true" class="header-anchor">#</a> 适用场合</h2> <ol><li><p>当要为访问一系列复杂的子系统提供一个简单入口时可以使用外观模式</p></li> <li><p>客户端程序与多个子系统之间存在很大的依赖性。引入外观类可以将子系统与客户端解耦，从而提高子系统的独立性和可移植性</p></li> <li><p>在层次化结构中，可以使用外观模式定义系统中每一层的入口，层与层之间不直接产生联系，而通过外观类建立联系，降低层之间的耦合度</p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/22/2020, 12:20:37 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/design/013_DecoratorPattern.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        装饰模式
      </a></span> <span class="next"><a href="/design/015_FlyweightPattern.html">
        享元模式
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.193c9b61.js" defer></script><script src="/assets/js/2.be286493.js" defer></script><script src="/assets/js/30.4b4a9808.js" defer></script>
  </body>
</html>