<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>适配器模式 | Koala &#39;s blog</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="欢迎来到我的博客">
    <link rel="preload" href="/assets/css/0.styles.0dca6718.css" as="style"><link rel="preload" href="/assets/js/app.193c9b61.js" as="script"><link rel="preload" href="/assets/js/2.be286493.js" as="script"><link rel="preload" href="/assets/js/26.cee42a14.js" as="script"><link rel="prefetch" href="/assets/js/10.d195f939.js"><link rel="prefetch" href="/assets/js/11.dd42e2a6.js"><link rel="prefetch" href="/assets/js/12.ee2c872c.js"><link rel="prefetch" href="/assets/js/13.788181fe.js"><link rel="prefetch" href="/assets/js/14.923b40d7.js"><link rel="prefetch" href="/assets/js/15.be1e8f2a.js"><link rel="prefetch" href="/assets/js/16.a5861f2e.js"><link rel="prefetch" href="/assets/js/17.0ca1cca8.js"><link rel="prefetch" href="/assets/js/18.3552af88.js"><link rel="prefetch" href="/assets/js/19.d0b598dd.js"><link rel="prefetch" href="/assets/js/20.312fba46.js"><link rel="prefetch" href="/assets/js/21.de99e5de.js"><link rel="prefetch" href="/assets/js/22.4cb1ef09.js"><link rel="prefetch" href="/assets/js/23.2e9ea85a.js"><link rel="prefetch" href="/assets/js/24.1cd100b8.js"><link rel="prefetch" href="/assets/js/25.c17ed571.js"><link rel="prefetch" href="/assets/js/27.34b9e8bb.js"><link rel="prefetch" href="/assets/js/28.a0fd1666.js"><link rel="prefetch" href="/assets/js/29.cc16a8ba.js"><link rel="prefetch" href="/assets/js/3.e2b53d75.js"><link rel="prefetch" href="/assets/js/30.4b4a9808.js"><link rel="prefetch" href="/assets/js/31.55d17ac2.js"><link rel="prefetch" href="/assets/js/32.e6285297.js"><link rel="prefetch" href="/assets/js/33.2cf9fcd0.js"><link rel="prefetch" href="/assets/js/34.549b5096.js"><link rel="prefetch" href="/assets/js/35.fd8c8f14.js"><link rel="prefetch" href="/assets/js/36.db162c08.js"><link rel="prefetch" href="/assets/js/37.f105831d.js"><link rel="prefetch" href="/assets/js/38.d42b82e0.js"><link rel="prefetch" href="/assets/js/39.eb81783f.js"><link rel="prefetch" href="/assets/js/4.2837b6be.js"><link rel="prefetch" href="/assets/js/40.87c4c789.js"><link rel="prefetch" href="/assets/js/41.fc9b4279.js"><link rel="prefetch" href="/assets/js/42.c9148681.js"><link rel="prefetch" href="/assets/js/43.dbe26f4f.js"><link rel="prefetch" href="/assets/js/44.b1d85a5c.js"><link rel="prefetch" href="/assets/js/45.5a1e6a7a.js"><link rel="prefetch" href="/assets/js/46.bd963e4a.js"><link rel="prefetch" href="/assets/js/47.f6e86edc.js"><link rel="prefetch" href="/assets/js/48.bdbc5c65.js"><link rel="prefetch" href="/assets/js/49.65ae461d.js"><link rel="prefetch" href="/assets/js/5.3f71247d.js"><link rel="prefetch" href="/assets/js/50.66be60b2.js"><link rel="prefetch" href="/assets/js/51.42b1c641.js"><link rel="prefetch" href="/assets/js/52.bb9f5b94.js"><link rel="prefetch" href="/assets/js/53.3ed95f43.js"><link rel="prefetch" href="/assets/js/54.b989fa99.js"><link rel="prefetch" href="/assets/js/55.7799c2bd.js"><link rel="prefetch" href="/assets/js/56.95e3d2fa.js"><link rel="prefetch" href="/assets/js/57.47649eef.js"><link rel="prefetch" href="/assets/js/58.c3ce9734.js"><link rel="prefetch" href="/assets/js/59.1e092fb4.js"><link rel="prefetch" href="/assets/js/6.ba15ebf3.js"><link rel="prefetch" href="/assets/js/60.ae57b5f2.js"><link rel="prefetch" href="/assets/js/61.68ecf247.js"><link rel="prefetch" href="/assets/js/62.42a2fc04.js"><link rel="prefetch" href="/assets/js/63.819b8db9.js"><link rel="prefetch" href="/assets/js/64.8034f4d3.js"><link rel="prefetch" href="/assets/js/65.fa291912.js"><link rel="prefetch" href="/assets/js/66.3db4dcf7.js"><link rel="prefetch" href="/assets/js/67.a66d7e55.js"><link rel="prefetch" href="/assets/js/68.cbaf17d3.js"><link rel="prefetch" href="/assets/js/7.6f9d368d.js"><link rel="prefetch" href="/assets/js/8.516fa0e1.js"><link rel="prefetch" href="/assets/js/9.f1946ce5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0dca6718.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container custom-page-class"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">Koala 's blog</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="/design/" class="router-link-active">
          设计模式
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/algorithm/">
          算法相关
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          java相关
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/design/001_Preface.html" class="sidebar-link">前言</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>创建者模式</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>结构性模式</span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/009_StructuralPattern.html" class="sidebar-link">介绍</a></li><li><a href="/design/010_AdapterPattern.html" class="active sidebar-link">适配器模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#对象适配器模式和类适配器模式" class="sidebar-link">对象适配器模式和类适配器模式</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#对象适配器模式" class="sidebar-link">对象适配器模式</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#类适配器模式" class="sidebar-link">类适配器模式</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#双向适配器模式" class="sidebar-link">双向适配器模式</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#缺省适配器模式" class="sidebar-link">缺省适配器模式</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#优点" class="sidebar-link">优点</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#缺点" class="sidebar-link">缺点</a></li><li class="sidebar-sub-header"><a href="/design/010_AdapterPattern.html#适用场景" class="sidebar-link">适用场景</a></li></ul></li><li><a href="/design/011_BridgePattern.html" class="sidebar-link">桥接模式</a></li><li><a href="/design/012_CompositePattern.html" class="sidebar-link">组合模式</a></li><li><a href="/design/013_DecoratorPattern.html" class="sidebar-link">装饰模式</a></li><li><a href="/design/014_FacadePattern.html" class="sidebar-link">外观模式</a></li><li><a href="/design/015_FlyweightPattern.html" class="sidebar-link">享元模式</a></li><li><a href="/design/016_ProxyPattern.html" class="sidebar-link">代理模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>行为性模式</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="概述"><a href="#概述" aria-hidden="true" class="header-anchor">#</a> 概述</h2> <blockquote><p>与电源适配器相似，在适配器模式中引入了一个被称为 <strong>适配器（Adapter）</strong> 的包装类，而它所包装的对象称之为<strong>适配者（Adaptee）</strong>，即被适配的类。适配器的实现就是把客户类的请求转化为对适配者的相应接口的调用。也就是说，当客户类调用适配器的方法时，在适配器类的内部将调用适配者类的方法，而这个过程对客户类是透明的，客户类并不直接访问适配者类。因此适配器让那些由于接口不兼容而不能交互的类可以一起工作</p></blockquote> <p>适配器模式可以将一个类的接口和另一个类的接口匹配起来，而无须修改原来的适配者接口和抽象目标类接口</p> <h2 id="定义"><a href="#定义" aria-hidden="true" class="header-anchor">#</a> 定义</h2> <blockquote><p>适配器模式（Adapter Pattern）：将一个接口转换为客户希望的另一个接口，使接口不兼容的那些类可以一起工作，其别名为包装类（Wrapper）。适配器模式既可以作为类结构型模式，也可以作为对象结构型模式</p></blockquote> <h2 id="对象适配器模式和类适配器模式"><a href="#对象适配器模式和类适配器模式" aria-hidden="true" class="header-anchor">#</a> 对象适配器模式和类适配器模式</h2> <p>在适配器模式中，通过增加一个新的适配器类来解决接口不兼容的问题，使得原本没有任何关系的类可以协同工作。根据适配器类与适配者类的关系不同，适配器模式可以分对象适配器模式和类适配器模式两种。在对象适配器模式种，适配器与适配者之间是关联关系；在类适配器模式中，适配器与适配者之间是继承（或实现）关系。在实际开发中，对象适配器模式的使用频率更高。</p> <h2 id="对象适配器模式"><a href="#对象适配器模式" aria-hidden="true" class="header-anchor">#</a> 对象适配器模式</h2> <h3 id="结构图"><a href="#结构图" aria-hidden="true" class="header-anchor">#</a> 结构图</h3> <p><a data-fancybox="" title="对象适配器模式" href="/pic/design/se5xoPH.png"><img src="/pic/design/se5xoPH.png" alt="对象适配器模式"></a></p> <ol><li><p><strong>Target（目标抽象类）</strong>：目标抽象类定义客户所需接口，可以是一个抽象类或接口，也可以是具体类</p></li> <li><p><strong>Adapter（适配器类）</strong>：适配器可以调用另一个接口，作为一个转换器，对Adaptee和Target进行适配。适配器类是适配器模式的核心，在对象适配器模式中，它通过继承Target并关联一个Adaptee对象使二者产生联系</p></li> <li><p><strong>Adapter（适配者类）</strong>：适配者即被适配的角色，它定义了一个已经存在的接口，这个接口需要适配，适配者类一般是一个具体类，包含了客户希望使用的业务方法，在某些情况下可能没有适配者类的源代码。</p></li></ol> <p>在结构图，客户端需要调用request()方法，而适配者类Adaptee没有该方法，但是它所提供的specificRequest()方法却是客户端所需要的，为了使客户端能够使用适配者类，需要提供一个包装类Adapter，即适配器类，这个包装类包装了一个适配者的实例，从而将客户端与适配者衔接起来，在适配器的request()方法中调用适配者的specificRequest()方法。因为适配器类与适配者类是关联关系（可以称为委派关系），所有这种适配器模式称为对象适配器模式。</p> <h3 id="典型代码实现"><a href="#典型代码实现" aria-hidden="true" class="header-anchor">#</a> 典型代码实现</h3> <p>典型的对象适配器模式代码如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	class Adapter extends Target<span class="token punctuation">{</span>
		
		private Adaptee adaptee<span class="token punctuation">;</span>   // 维护一个对适配者的引用

		public Adapter<span class="token punctuation">(</span>Adaptee adaptee<span class="token punctuation">)</span><span class="token punctuation">{</span>
			this.adaptee <span class="token operator">=</span> adaptee<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		public void request<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			adaptee.specificRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>；
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h3 id="算法库设计"><a href="#算法库设计" aria-hidden="true" class="header-anchor">#</a> 算法库设计</h3> <p>使用适配器模式设计已有的算法库的接口，使得不同系统可以调用算法库中的算法，结构图如下</p> <p><a data-fancybox="" title="结构图" href="/pic/design/uahB7jR.png"><img src="/pic/design/uahB7jR.png" alt="结构图"></a></p> <p><strong>对象适配器：</strong></p> <p>ScoreOperation接口充当抽象目标</p> <p>QuickSort和BinarySearch类充当适配者</p> <p>OperationAdapter充当适配器</p> <p><strong>抽象成绩操作类：目标接口</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	interface ScoreOperation <span class="token punctuation">{</span>
		public int<span class="token punctuation">[</span><span class="token punctuation">]</span> sort<span class="token punctuation">(</span>int array<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				//成绩排序
		public int search<span class="token punctuation">(</span>int array<span class="token punctuation">[</span><span class="token punctuation">]</span>, int key<span class="token punctuation">)</span><span class="token punctuation">;</span>	//成绩查找
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>快速排序类：适配者</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class QuickSort <span class="token punctuation">{</span>
		
		public int<span class="token punctuation">[</span><span class="token punctuation">]</span> quickSort<span class="token punctuation">(</span>int array<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			sort<span class="token punctuation">(</span>array, 0, array.length - 1<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> array<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		public void sort<span class="token punctuation">(</span>int array<span class="token punctuation">[</span><span class="token punctuation">]</span>, int p, int r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			int q <span class="token operator">=</span> 0<span class="token punctuation">;</span>
			if<span class="token punctuation">(</span>p <span class="token operator">&lt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				q <span class="token operator">=</span> partition<span class="token punctuation">(</span>array, p, r<span class="token punctuation">)</span><span class="token punctuation">;</span>
				sort<span class="token punctuation">(</span>array, p, q-1<span class="token punctuation">)</span><span class="token punctuation">;</span>
				sort<span class="token punctuation">(</span>array, q+1, r<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		public int partition<span class="token punctuation">(</span>int<span class="token punctuation">[</span><span class="token punctuation">]</span> a, int p, int r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			int x <span class="token operator">=</span> a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>
			int j <span class="token operator">=</span> p - 1<span class="token punctuation">;</span>
			for<span class="token punctuation">(</span>int i <span class="token operator">=</span> p<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> r-1<span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				if<span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					j ++<span class="token punctuation">;</span>
					swap<span class="token punctuation">(</span>a, j, i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			swap<span class="token punctuation">(</span>a, j+1, r<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> j + 1<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		public void swap<span class="token punctuation">(</span>int<span class="token punctuation">[</span><span class="token punctuation">]</span> a, int i, int j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			int t <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
			a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>二分查找类:适配者</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class BinarySearch <span class="token punctuation">{</span>
		public int binarySearch<span class="token punctuation">(</span>int array<span class="token punctuation">[</span><span class="token punctuation">]</span>, int key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			int low <span class="token operator">=</span> 0<span class="token punctuation">;</span>
			int high <span class="token operator">=</span> array.length - 1<span class="token punctuation">;</span>
			while<span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				int mid <span class="token operator">=</span> <span class="token punctuation">(</span>low + high<span class="token punctuation">)</span> / 2<span class="token punctuation">;</span>
				int midVal <span class="token operator">=</span> array<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">;</span>
				if<span class="token punctuation">(</span>midVal <span class="token operator">&lt;</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					low <span class="token operator">=</span> mid + 1<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>else if<span class="token punctuation">(</span>midVal <span class="token operator">&gt;</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					high <span class="token operator">=</span> mid - 1<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>else <span class="token punctuation">{</span>
					<span class="token keyword">return</span> 1<span class="token punctuation">;</span>				//找到元素返回1
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> -1<span class="token punctuation">;</span>						//未找到元素返回-1
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>操作适配器：适配器</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class OperationAdapter implements ScoreOperation <span class="token punctuation">{</span>
	
		private QuickSort sortObj<span class="token punctuation">;</span>			//定义适配者 QuickSort对象
		private BinarySearch searchObj<span class="token punctuation">;</span>		//定义适配者BinarySearch对象
		
		public OperationAdapter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			sortObj <span class="token operator">=</span> new QuickSort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			searchObj <span class="token operator">=</span> new BinarySearch<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		@Override
		public int<span class="token punctuation">[</span><span class="token punctuation">]</span> sort<span class="token punctuation">(</span>int<span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> sortObj.quickSort<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>	//调用适配者类QuickSort的排序方法
		<span class="token punctuation">}</span>
	
		@Override
		public int search<span class="token punctuation">(</span>int<span class="token punctuation">[</span><span class="token punctuation">]</span> array, int key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> searchObj.binarySearch<span class="token punctuation">(</span>array, key<span class="token punctuation">)</span><span class="token punctuation">;</span>	//调用适配者类BinarySearch的查找方法
		<span class="token punctuation">}</span>
	
	<span class="token punctuation">}</span>
</code></pre></div><p>配置文件，存储了适配器类的类名</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	<span class="token operator">&lt;</span>?xml version <span class="token operator">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>config<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>className<span class="token operator">&gt;</span>OperationAdapter<span class="token operator">&lt;</span>/className<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>/config<span class="token operator">&gt;</span>
</code></pre></div><p>读取XML文件并生成具体的实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class XMLUtils <span class="token punctuation">{</span>
		//该方法用于从XML配置文件中提取具体类类名，并返回一个实例对象
		public static Object getBean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			try <span class="token punctuation">{</span>
				//创建文档对象
				DocumentBuilderFactory dFactory <span class="token operator">=</span> DocumentBuilderFactory.newInstance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				DocumentBuilder builder <span class="token operator">=</span> dFactory.newDocumentBuilder<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				Document doc<span class="token punctuation">;</span>
				doc <span class="token operator">=</span> builder.parse<span class="token punctuation">(</span>new File<span class="token punctuation">(</span><span class="token string">&quot;config.xml&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
				
				//获取包含类名的文本节点
				NodeList <span class="token function">nl</span> <span class="token operator">=</span> doc.getElementsByTagName<span class="token punctuation">(</span><span class="token string">&quot;className&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				Node classNode <span class="token operator">=</span> nl.item<span class="token punctuation">(</span>0<span class="token punctuation">)</span>.getFirstChild<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				String cName <span class="token operator">=</span> classNode.getNodeValue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				//通过类名生成实例对象并将其返回
				Class c <span class="token operator">=</span> Class.forName<span class="token punctuation">(</span>cName<span class="token punctuation">)</span><span class="token punctuation">;</span>
				Object obj <span class="token operator">=</span> c.newInstance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> null<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>客户端测试</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	public class Client <span class="token punctuation">{</span>
		public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			
			ScoreOperation operation<span class="token punctuation">;</span>							//针对抽象目标接口编程
			operation <span class="token operator">=</span> <span class="token punctuation">(</span>ScoreOperation<span class="token punctuation">)</span> XMLUtils.getBean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	//读取配置文件，反射生成对象
			int scores<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>84, 76, 50, 69, 90, 91, 88, 96<span class="token punctuation">}</span><span class="token punctuation">;</span>	//定义成绩数组
			int result<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			int score<span class="token punctuation">;</span>
			
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;成绩排序结果：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			result <span class="token operator">=</span> operation.sort<span class="token punctuation">(</span>scores<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			System.out.println<span class="token punctuation">(</span><span class="token string">&quot;查找成绩90：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			score <span class="token operator">=</span> operation.search<span class="token punctuation">(</span>scores, 90<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="类适配器模式"><a href="#类适配器模式" aria-hidden="true" class="header-anchor">#</a> 类适配器模式</h2> <p>类适配器模式与对象适配器模式的最大的区别在于适配器和适配者之间的关系是继承关系，结构图如下</p> <h3 id="结构图-2"><a href="#结构图-2" aria-hidden="true" class="header-anchor">#</a> 结构图</h3> <p><a data-fancybox="" title="类适配器结构图" href="/pic/design/iopPvWu.png"><img src="/pic/design/iopPvWu.png" alt="类适配器结构图"></a></p> <p>根据上图的类适配器模式结构图所示，适配器类实现了抽象目标类接口Target，并继承了适配者类，在适配器类的request()方法中调用了所继承的适配者类的specificRequest()方法，实现了适配。典型的类适配器模式代码如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	class  Adpater extends Adaptee implements Target<span class="token punctuation">{</span>
		public void request<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			specificRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>；
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="双向适配器模式"><a href="#双向适配器模式" aria-hidden="true" class="header-anchor">#</a> 双向适配器模式</h2> <p>在对象适配器模式的使用过程中，如果适配器中同时包含对目标类和适配者类的引用，适配者可以通过它调用目标类中的方法，目标类也可以通过它调用适配者类中的方法，那么该适配器就是一个双向适配器，其模式结构图如下</p> <p><a data-fancybox="" title="双向适配器结构图" href="/pic/design/gYOKBEF.png"><img src="/pic/design/gYOKBEF.png" alt="双向适配器结构图"></a></p> <p>双向适配器模式的实现较为复杂，其典型的代码如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	class Adapter implements Target, Adaptee<span class="token punctuation">{</span>
		
		//同时维持对抽象目标类和适配者的引用
		private Target target<span class="token punctuation">;</span>
		
		private Adaptee adaptee<span class="token punctuation">;</span>

		public Adapter<span class="token punctuation">(</span>Target target<span class="token punctuation">)</span><span class="token punctuation">{</span>
			this.target <span class="token operator">=</span> target<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		public Adapter<span class="token punctuation">(</span>Adaptee adaptee<span class="token punctuation">)</span><span class="token punctuation">{</span>
			this.adaptee <span class="token operator">=</span> adaptee<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		public void request<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			adaptee.specificRequest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		public void specificRequest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			target.request<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="缺省适配器模式"><a href="#缺省适配器模式" aria-hidden="true" class="header-anchor">#</a> 缺省适配器模式</h2> <h3 id="定义-2"><a href="#定义-2" aria-hidden="true" class="header-anchor">#</a> 定义</h3> <blockquote><p>缺省适配器模式（Default Adapter Pattern）：当不需要实现一个接口所提供的所有方法时，可先设计一个抽象类实现该接口，并为接口中每个方法提供一个默认实现（空方法），那么该抽象类的子类可以选择性地覆盖父类的某些方法来实现需求，它适用于不想使用一个接口中的所有方法的情况，又称为单接口适配器模式</p></blockquote> <h3 id="结构图-3"><a href="#结构图-3" aria-hidden="true" class="header-anchor">#</a> 结构图</h3> <p><a data-fancybox="" title="缺省适配器结构图" href="/pic/design/qMIP2ny.png"><img src="/pic/design/qMIP2ny.png" alt="缺省适配器结构图"></a></p> <ol><li><p><strong>ServiceInterface(适配者接口)</strong>：它是一个接口，通常在该接口中声明了大量的方法</p></li> <li><p><strong>AbstractServiceClass(缺省适配器类)</strong>：它是缺省适配器模式的核心类，使用空方法的形式实现了在ServiceInterface接口中声明的方法，通常将他定义为抽象类，因为对它进行实例化没有任何意义</p></li> <li><p><strong>ConcreteServiceClass(具体业务类)</strong>：它是缺省适配器类的子类，在没有引入适配器之前，它需要实现适配者接口，因此需要实现在适配者接口中定义的所有方法，而对于一些无须使用的方法也不得不提供空实现。现在有了缺省适配器模式之后，可以直接继承该适配器类，根据需要有选择性的覆盖在适配器类中定义的方法</p></li></ol> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>适配器模式将现有接口转化为客户类所期待的接口，实现了对现有类的复用，它是一种使用频率非常高的设计模式，在软件开发种得以广泛应用，在Spring等开源框架，驱动程序设计（例如JDBC中的数据库驱动程序）中也使用适配器模式</p> <h2 id="优点"><a href="#优点" aria-hidden="true" class="header-anchor">#</a> 优点</h2> <ol><li><p>将目标类和适配者类解耦，通过引入一个适配器类来重用现有的适配者类，无须修改原有结构</p></li> <li><p>增加了类的透明性和复用性，将具体的业务实现过程封装在适配者类中，对于客户端类而言是透明的，而且提高了适配者类的复用性，同一个适配者类可以在多个不同系统中复用</p></li> <li><p>灵活性和扩展性非常好，通过使用配置文件，可以很方便的更换适配器，也可以在不修改原有代码的基础上增加新的适配器类，完全符合开闭原则。</p></li></ol> <p>对于类适配器模式来说，由于适配器类是适配者类的子类，因此可以在适配器类中置换一些适配者的方法，使得适配器更加灵活</p> <p>对于对象适配器模式来说，一个对象适配器可以把多个不同的适配者适配到同一个目标中；可以适配一个适配者的子类，由于适配器和适配者之间是关联关系，根据里氏代换原则，适配者的子类也可以通过该适配器进行适配</p> <h2 id="缺点"><a href="#缺点" aria-hidden="true" class="header-anchor">#</a> 缺点</h2> <h3 id="类适配器模式-2"><a href="#类适配器模式-2" aria-hidden="true" class="header-anchor">#</a> 类适配器模式</h3> <ol><li><p>对于java， C#等不支持多重继承的语言，一次最多只能适配一个适配者类，不能同时适配多个适配者</p></li> <li><p>适配者类不能为最终类，例如在java中不能为final类，C#不能为sealed类。</p></li> <li><p>在java， C#等语言中，类适配器模式中的目标抽象类只能为接口，不能为类，其使用有一定的局限性</p></li></ol> <h3 id="对象适配器模式-2"><a href="#对象适配器模式-2" aria-hidden="true" class="header-anchor">#</a> 对象适配器模式</h3> <p>与类适配器模式相比，要在适配器中置换适配者类的某些方法比较麻烦。如果一定要置换适配者类的一个或者多个方法，可以先做一个适配者类的子类，在子类中将适配者类的方法置换掉，然后再把适配者类的子类当作真正的适配者进行适配，实现过程较为复杂</p> <h2 id="适用场景"><a href="#适用场景" aria-hidden="true" class="header-anchor">#</a> 适用场景</h2> <ol><li><p>系统需要使用一些现有的类，而这些类的接口（例如方法名）不符合系统的需要，甚至没有这些类的源代码</p></li> <li><p>想创建一个可以重复使用的类，用于与一些彼此之间没有太大关联的类，包括一些可能在将来引进的类一起工作</p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/22/2020, 12:20:37 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/design/009_StructuralPattern.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        介绍
      </a></span> <span class="next"><a href="/design/011_BridgePattern.html">
        桥接模式
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.193c9b61.js" defer></script><script src="/assets/js/2.be286493.js" defer></script><script src="/assets/js/26.cee42a14.js" defer></script>
  </body>
</html>